
     

generator client {
    output        = "./client"
    binaryTargets = ["native", "debian-openssl-3.0.x"]
    provider      = "prisma-client-js"
}
    

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

    

enum IdType {
    STRING
    INT
}


enum EmailStatus {
    SENT
    NOT_SENT
    PENDING
    SENDING
}


enum JobStatus {
    DONE
    PENDING
    FAILED
}


enum JobHandlerType {
    HANDLER_NAME
    FUNCTION_STRING
}

enum UserType {
    ADMIN
    OTHER
    SYSTEM
}

    
   

model Email {
    EmailId               Int          @id @default(autoincrement())
    from                  String
    to                    String
    cc                    String?
    subject               String?
    emailText             String?
    templatePath          String?
    emailHtmlFileFullPath String?
    status                EmailStatus? @default(PENDING)

    @@index([from])
    @@index([to])
    @@index([subject])
    @@index([status])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("EmailCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("EmailUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Job {
    jobId          Int            @id @default(autoincrement())
    title          String?
    handler        String
    handlerType    JobHandlerType @default(HANDLER_NAME)
    argumentJson   String?
    designatedDate DateTime
    cronSchedule   String?
    repeatCount    Int?           @default(-1)
    status         JobStatus      @default(PENDING)
    output         String?

    @@index([title])
    @@index([handlerType])
    @@index([designatedDate])
    @@index([cronSchedule])
    @@index([repeatCount])
    @@index([status])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("JobCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("JobUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   
model File {
    fileId              Int                 @id @default(autoincrement())
    name                String
    mimetype            String
    size                Int
    path                String
    commentsAttachments CommentAttachment[]

    @@index([name])
    @@index([mimetype])
    @@index([path])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("FileCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("FileUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model CommentAttachment {
    attachmentId     Int @id @default(autoincrement())
    commentId        Int
    attachmentFileId Int

    comment Comments @relation(fields: [commentId], references: [commentId])
    file    File     @relation(fields: [attachmentFileId], references: [fileId])

    @@index([commentId], map: "commentId")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("CommentAttachmentCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("CommentAttachmentUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Comments {
    commentId       Int     @id @default(autoincrement())
    commentText     String?
    commentSource   String
    commentSourceId Int?
    byUser          Int?
    byUsername      String?

    commentedByUser User? @relation("commentsByUserToUser", fields: [byUser], references: [userId])

    CommentAttachment CommentAttachment[]

    @@index([byUser], map: "byUser")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("CommentsCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("CommentsUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   
model Device {
    deviceId    Int    @id @default(autoincrement())
    deviceToken String

    userId Int?
    user   User? @relation("userDevices", fields: [userId], references: [userId])

    notificationTokens NotificationToken[]

    @@index([deviceToken])
    @@index([userId], map: "userId")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("DeviceCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("DeviceUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model NotificationToken {
    notificationTokenId Int @id @default(autoincrement())

    token String?

    deviceId Int?
    device   Device? @relation(fields: [deviceId], references: [deviceId])

    @@index([token])
    @@index([deviceId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("NotificationTokenCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("NotificationTokenUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Notification {
    notificationId Int @id @default(autoincrement())

    notificationTokensId String

    dataJson         String?
    notificationJson String?

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("NotificationCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("NotificationUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Log {
    logId   Int     @id @default(autoincrement())
    level   Int
    title   String?
    logText String?
    source  String?

    logLevel LogLevel @relation(fields: [level], references: [levelId])

    @@index([level])
    @@index([title])
    @@index([level], map: "level")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("LogCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("LogUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model LogLevel {
    levelId     Int     @id @default(autoincrement())
    name        String
    description String?

    logs Log[]

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("LogLevelCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("LogLevelUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserNotification {
    notificationId Int @id @default(autoincrement())

    title    String?
    contents String?
    read     Boolean @default(false)

    userId Int
    user   User @relation(fields: [userId], references: [userId], onUpdate: Cascade, onDelete: Cascade)

    notificationResourceId Int?
    notificationResource   NotificationResource? @relation("notificationInstanceResource", references: [resourceId], fields: [notificationResourceId])

    tags UserNotificationTag[] @relation("notificationTags")

    @@index([userId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserNotificationCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserNotificationUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model NotificationResource {
    resourceId Int @id @default(autoincrement())

    title    String
    contents String
    tags     UserNotificationTag[] @relation("notificationResourceTags")

    usersNotifications UserNotification[] @relation("notificationInstanceResource")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("NotificationResourceCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("NotificationResourceUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserNotificationTag {
    relationId Int @id @default(autoincrement())

    tagId Int?
    tag   NotificationTag? @relation("usersNotifications", references: [tagId], fields: [tagId])

    notificationId Int?
    notification   UserNotification? @relation("notificationTags", references: [notificationId], fields: [notificationId])

    notificationResourceId Int?
    notificationResource   NotificationResource? @relation("notificationResourceTags", references: [resourceId], fields: [notificationResourceId])

    @@index([notificationId])
    @@index([notificationResourceId])
    @@index([tagId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserNotificationTagCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserNotificationTagUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model NotificationTag {
    tagId Int     @id @default(autoincrement())
    color String?

    label String?

    usersNotifications UserNotificationTag[] @relation("usersNotifications")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("NotificationTagCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("NotificationTagUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserAuthority {
    authorityId Int @id @default(autoincrement())

    keyName String

    userId Int?
    user   User? @relation("userAuthorities", references: [userId], fields: [userId])

    all Boolean @default(true)

    dynamicAuthorities UserDynamicAuthority[] @relation("dynamicAuthorities")

    @@index([keyName])
    @@index([userId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserAuthorityCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserAuthorityUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserDynamicAuthority {
    dynamicAuthorityId Int @id @default(autoincrement())

    dynamicAuthorityKey String

    all Boolean @default(true)

    authorityId Int?
    authority   UserAuthority? @relation("dynamicAuthorities", references: [authorityId], fields: [authorityId])

    dynamicAuthorityValues UserDynamicAuthorityValue[] @relation("dynamicAuthorityValues")

    @@index([dynamicAuthorityKey])
    @@index([authorityId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserDynamicAuthorityCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserDynamicAuthorityUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserDynamicAuthorityValue {
    valueId Int    @id @default(autoincrement())
    value   String

    dynamicAuthorityId Int?
    dynamicAuthority   UserDynamicAuthority? @relation("dynamicAuthorityValues", references: [dynamicAuthorityId], fields: [dynamicAuthorityId])

    @@index([dynamicAuthorityId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserDynamicAuthorityValueCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserDynamicAuthorityValueUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model AuthoritiesProfile {
    profileId   Int     @id @default(autoincrement())
    name        String
    description String?

    defaultHomePageName String?

    profileAuthorities ProfileAuthority[] @relation("AuthoritiesProfileAuthorities")

    users User[] @relation("authorizationProfileUsers")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("AuthoritiesProfileCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("AuthoritiesProfileUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model ProfileAuthority {
    authorityId Int @id @default(autoincrement())

    keyName String

    profileId Int?
    profile   AuthoritiesProfile? @relation("AuthoritiesProfileAuthorities", references: [profileId], fields: [profileId])

    all Boolean @default(true)

    dynamicAuthorities ProfileDynamicAuthority[] @relation("dynamicAuthorities")

    @@index([keyName])
    @@index([profileId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("ProfileAuthorityCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("ProfileAuthorityUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model ProfileDynamicAuthority {
    dynamicAuthorityId Int @id @default(autoincrement())

    dynamicAuthorityKey String

    all Boolean @default(true)

    authorityId Int?
    authority   ProfileAuthority? @relation("dynamicAuthorities", references: [authorityId], fields: [authorityId])

    dynamicAuthorityValues ProfileDynamicAuthorityValue[] @relation("dynamicAuthorityValues")

    @@index([dynamicAuthorityKey])
    @@index([authorityId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("ProfileDynamicAuthorityCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("ProfileDynamicAuthorityUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model ProfileDynamicAuthorityValue {
    valueId Int    @id @default(autoincrement())
    value   String

    dynamicAuthorityId Int?
    dynamicAuthority   ProfileDynamicAuthority? @relation("dynamicAuthorityValues", references: [dynamicAuthorityId], fields: [dynamicAuthorityId])

    @@index([dynamicAuthorityId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("ProfileDynamicAuthorityValueCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("ProfileDynamicAuthorityValueUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model UserLog {
    logId Int @id @default(autoincrement())

    userId Int?
    user   User? @relation("userLogs", references: [userId], fields: [userId])

    summary      String?
    titleDisplay String?
    title        String?

    // model that relates to the log 
    model    String?
    modelKey String?
    modelId  Int?

    variables String?

    @@index([userId])

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserLogCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserLogUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Country {
    countryId   Int     @id @default(autoincrement())
    name        String
    description String?

    cities City[]

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("CountryCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("CountryUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model City {
    cityId      Int     @id @default(autoincrement())
    countryId   Int
    name        String
    description String?

    country Country @relation(fields: [countryId], references: [countryId])

    Region Region[]

    @@index([countryId], map: "countryId")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("CityCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("CityUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    

   

model Region {
    regionId Int    @id @default(autoincrement())
    cityId   Int
    name     String

    city  City   @relation(fields: [cityId], references: [cityId])
    users User[] @relation("regionToUserRegion")

    @@index([cityId], map: "cityId")

    
    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("RegionCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("RegionUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

}
    



model User {
    userId Int @id @default(autoincrement())

    lastOnline  DateTime? @updatedAt
    lastOffline DateTime? @updatedAt

    archived Boolean @default(false)
    active   Boolean @default(true)

    // identifier
    fullName String

    // credential 
    username String
    password String

    // contacts 
    unverifiedEmail String?
    email           String?

    unverifiedPhone String?
    phone           String?

    userType UserType

    // address  
    regionId     Int?
    region       Region? @relation("regionToUserRegion", fields: [regionId], references: [regionId], onDelete: NoAction, onUpdate: NoAction)
    nearestPoint String?

    // normal relations 
    comments Comments[] @relation("commentsByUserToUser")
    devices  Device[]   @relation("userDevices")
    userLogs UserLog[]  @relation("userLogs")

    // authorities 
    userAuthorities     UserAuthority[] @relation("userAuthorities")
    defaultHomePageName String?

    // authorization profile  
    authorizationProfileId Int?
    authorizationProfile   AuthoritiesProfile? @relation("authorizationProfileUsers", fields: [authorizationProfileId], references: [profileId])

    // notifications
    notifications UserNotification[]

    @@index([active])
    @@index([username])
    @@index([regionId])
    @@index([authorizationProfileId])


    
    createdByUserId         Int?        
    createdByUserUsername   String?     
    createdByUserFullName  String?     
    updatedByUserId         Int?        
    updatedByUserUsername   String?     
    updatedByUserFullName  String?     
    createdAt                 DateTime?   @default(now())
    updatedAt                 DateTime?   @updatedAt
    deleted                   Boolean?    @default(false)
    createdByUser             User?      @relation("UserCreatedByUserToUser", fields: [createdByUserId], references: [userId])
    updatedByUser             User?      @relation("UserUpdatedByUserToUser", fields: [updatedByUserId], references: [userId])
    @@index([createdByUserId])
    @@index([updatedByUserId])
    @@index([deleted])
   

    
    createdEmail Email[] @relation("EmailCreatedByUserToUser")
    updatedEmail Email[] @relation("EmailUpdatedByUserToUser")



    createdJob Job[] @relation("JobCreatedByUserToUser")
    updatedJob Job[] @relation("JobUpdatedByUserToUser")



    createdFile File[] @relation("FileCreatedByUserToUser")
    updatedFile File[] @relation("FileUpdatedByUserToUser")



    createdCommentAttachment CommentAttachment[] @relation("CommentAttachmentCreatedByUserToUser")
    updatedCommentAttachment CommentAttachment[] @relation("CommentAttachmentUpdatedByUserToUser")



    createdComments Comments[] @relation("CommentsCreatedByUserToUser")
    updatedComments Comments[] @relation("CommentsUpdatedByUserToUser")



    createdDevice Device[] @relation("DeviceCreatedByUserToUser")
    updatedDevice Device[] @relation("DeviceUpdatedByUserToUser")



    createdNotificationToken NotificationToken[] @relation("NotificationTokenCreatedByUserToUser")
    updatedNotificationToken NotificationToken[] @relation("NotificationTokenUpdatedByUserToUser")



    createdNotification Notification[] @relation("NotificationCreatedByUserToUser")
    updatedNotification Notification[] @relation("NotificationUpdatedByUserToUser")



    createdLog Log[] @relation("LogCreatedByUserToUser")
    updatedLog Log[] @relation("LogUpdatedByUserToUser")



    createdLogLevel LogLevel[] @relation("LogLevelCreatedByUserToUser")
    updatedLogLevel LogLevel[] @relation("LogLevelUpdatedByUserToUser")



    createdUserNotification UserNotification[] @relation("UserNotificationCreatedByUserToUser")
    updatedUserNotification UserNotification[] @relation("UserNotificationUpdatedByUserToUser")



    createdNotificationResource NotificationResource[] @relation("NotificationResourceCreatedByUserToUser")
    updatedNotificationResource NotificationResource[] @relation("NotificationResourceUpdatedByUserToUser")



    createdUserNotificationTag UserNotificationTag[] @relation("UserNotificationTagCreatedByUserToUser")
    updatedUserNotificationTag UserNotificationTag[] @relation("UserNotificationTagUpdatedByUserToUser")



    createdNotificationTag NotificationTag[] @relation("NotificationTagCreatedByUserToUser")
    updatedNotificationTag NotificationTag[] @relation("NotificationTagUpdatedByUserToUser")



    createdUserAuthority UserAuthority[] @relation("UserAuthorityCreatedByUserToUser")
    updatedUserAuthority UserAuthority[] @relation("UserAuthorityUpdatedByUserToUser")



    createdUserDynamicAuthority UserDynamicAuthority[] @relation("UserDynamicAuthorityCreatedByUserToUser")
    updatedUserDynamicAuthority UserDynamicAuthority[] @relation("UserDynamicAuthorityUpdatedByUserToUser")



    createdUserDynamicAuthorityValue UserDynamicAuthorityValue[] @relation("UserDynamicAuthorityValueCreatedByUserToUser")
    updatedUserDynamicAuthorityValue UserDynamicAuthorityValue[] @relation("UserDynamicAuthorityValueUpdatedByUserToUser")



    createdAuthoritiesProfile AuthoritiesProfile[] @relation("AuthoritiesProfileCreatedByUserToUser")
    updatedAuthoritiesProfile AuthoritiesProfile[] @relation("AuthoritiesProfileUpdatedByUserToUser")



    createdProfileAuthority ProfileAuthority[] @relation("ProfileAuthorityCreatedByUserToUser")
    updatedProfileAuthority ProfileAuthority[] @relation("ProfileAuthorityUpdatedByUserToUser")



    createdProfileDynamicAuthority ProfileDynamicAuthority[] @relation("ProfileDynamicAuthorityCreatedByUserToUser")
    updatedProfileDynamicAuthority ProfileDynamicAuthority[] @relation("ProfileDynamicAuthorityUpdatedByUserToUser")



    createdProfileDynamicAuthorityValue ProfileDynamicAuthorityValue[] @relation("ProfileDynamicAuthorityValueCreatedByUserToUser")
    updatedProfileDynamicAuthorityValue ProfileDynamicAuthorityValue[] @relation("ProfileDynamicAuthorityValueUpdatedByUserToUser")



    createdUserLog UserLog[] @relation("UserLogCreatedByUserToUser")
    updatedUserLog UserLog[] @relation("UserLogUpdatedByUserToUser")



    createdCountry Country[] @relation("CountryCreatedByUserToUser")
    updatedCountry Country[] @relation("CountryUpdatedByUserToUser")



    createdCity City[] @relation("CityCreatedByUserToUser")
    updatedCity City[] @relation("CityUpdatedByUserToUser")



    createdRegion Region[] @relation("RegionCreatedByUserToUser")
    updatedRegion Region[] @relation("RegionUpdatedByUserToUser")



    createdUser User[] @relation("UserCreatedByUserToUser")
    updatedUser User[] @relation("UserUpdatedByUserToUser")

}


