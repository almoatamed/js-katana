{
    "title": "Rfid Content Type Definition Schema",
    "description": "describes how an Rfid content type should be handled as io",
    "type": "array",
    "items": {
        "anyOf": [
            {
                "type": "object",
                "required": ["type", "name", "display", "content_type_id"],
                "properties": {
                    "type": {
                        "const": "legacy"
                    },
                    "name": {
                        "type": "string"
                    },
                    "display": {
                        "type": "string"
                    },
                    "content_type_id": {
                        "type": "number"
                    },
                    "fetchAllUrl": {
                        "type": ["string", "null"]
                    },
                    "fetchMapper": {
                        "type": ["string"]
                    },
                    "textMapper": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "valueMapper": {
                        "type": "string"
                    },
                    "fetch_on_submit": {
                        "type": "boolean"
                    },
                    "submit_text": {
                        "type": "string"
                    },
                    "body_requirements": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": ["type", "display", "body_value"],
                            "properties": {
                                "type": {
                                    "type": "string"
                                },
                                "required":{
                                    "type": "boolean"
                                },
                                "display": {
                                    "type": "string"
                                },
                                "body_value": {
                                    "type": "string"
                                },
                                "rules": {
                                    "type": "object",
                                    "required": ["rule_name"],
                                    "properties": {
                                        "rule_name": {
                                            "type": "string"
                                        },
                                        "param": {
                                            "type": "object"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            {
                "type": "object",
                "required": ["type", "display", "name", "contentTypeId", "values"],
                "properties": {
                    "type": {
                        "const": "enum"
                    },
                    "name": {
                        "type": "string"
                    },
                    "contentTypeId": {
                        "type": "number"
                    },
                    "display": {
                        "type": "string"
                    },
                    "values": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": ["text", "value"],
                            "properties": {
                                "text": {
                                    "type": "string"
                                },
                                "value": {
                                    "type": "number"
                                }
                            }
                        }
                    }
                }
            },
            {
                "type": "object",
                "required": ["type", "display", "name", "contentTypeId"],
                "properties": {
                    "type": {
                        "const": "manual"
                    },
                    "name": {
                        "type": "string"
                    },
                    "contentTypeId": {
                        "type": "number"
                    },
                    "display": {
                        "type": "string"
                    }
                }
            },
            {
                "type": "object",
                "required": ["type", "display", "name", "contentTypeId", "textFormatter"],
                "properties": {
                    "type": {
                        "const": "fixed"
                    },
                    "name": {
                        "type": "string"
                    },
                    "contentTypeId": {
                        "type": "number"
                    },
                    "display": {
                        "type": "string"
                    },
                    "textFormatter": {
                        "type": "string"
                    }
                }
            },
            {
                "type": "object",
                "required": ["type", "display", "name", "contentTypeId", "fetchMapper", "fetchedListUrl", "valueMapper"],
                "properties": {
                    "type": {
                        "const":"fetchedList"
                    },
                    "name": {
                        "type": "string"
                    },
                    "contentTypeId": {
                        "type": "number"
                    },
                    "display": {
                        "type": "string"
                    },
                    "fetchedListUrl": {
                        "type": "string"
                    },
                    "fetchMapper": {
                        "type": ["string", "null"]
                    },
                    "valueMapper": {
                        "description": "it most start with \"[].\", it will map for recursive select, and recursive lookup for precise matching",
                        "type": ["string", "null"]
                    },
                    "textMapper": {
                        "type": ["array", "null"],
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            {
                "type": "object",
                "required": ["type", "display", "name", "contentTypeId", "reading", "writing"],
                "properties": {
                    "type": {
                        "const":"deferred"
                    },
                    "name": {
                        "type": "string"
                    },
                    "contentTypeId": {
                        "type": "number"
                    },
                    "display": {
                        "type": "string"
                    },
                    "reading": {
                        "type": "object",
                        "required": ["urlPath", "bodyKey", "fetchMapper", "valueMapper", ""],
                        "properties": {
                            "urlPath": {
                                "type": "string"
                            },
                            "bodyKey": {
                                "type": "string"
                            },
                            "fetchMapper": {
                                "type": ["string", "null"]
                            },
                            "valueMapper": {
                                "type": ["string", "null"]
                            },
                            "textMapper": {
                                "type": ["array", "null"],
                                "items": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        ],

        "type": "object",

        "required": ["type", "display", "name", "contentTypeId"],
        "properties": {
            "type": {
                "type": "string",
                "enum": ["deferred", "fetchedList", "fixed", "enum", "manual", "legacy"]
            },
            "name": {
                "type": "string"
            },
            "contentTypeId": {
                "type": "number"
            },
            "display": {
                "type": "string"
            },
            "fixed": {
                "type": "object",
                "required": ["textFormatter"],
                "properties": {
                    "textFormatter": {
                        "type": "string"
                    }
                }
            },
            "manual": {
                "type": "null"
            },
            "enum": {
                "type": "object",
                "required": ["values", "textMapper", "valueMapper"],
                "properties": {
                    "values": {
                        "type": "array"
                    },
                    "textMapper": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "valueMapper": {
                        "type": "string"
                    }
                }
            },
            "fetchedList": {
                "required": ["fetchMapper", "fetchedListUrl", "valueMapper"],
                "properties": {
                    "fetchedListUrl": {
                        "type": "string"
                    },
                    "fetchMapper": {
                        "type": ["string", "null"]
                    },
                    "valueMapper": {
                        "type": ["string", "null"]
                    },
                    "textMapper": {
                        "type": ["array", "null"],
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "deferred": {
                "type": "object",
                "required": ["reading", "writing"],
                "properties": {
                    "reading": {
                        "type": "object",
                        "required": ["urlPath", "bodyKey", "fetchMapper", "valueMapper", ""],
                        "properties": {
                            "urlPath": {
                                "type": "string"
                            },
                            "bodyKey": {
                                "type": "string"
                            },
                            "fetchMapper": {
                                "type": ["string", "null"]
                            },
                            "valueMapper": {
                                "type": ["string", "null"]
                            },
                            "textMapper": {
                                "type": ["array", "null"],
                                "items": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
